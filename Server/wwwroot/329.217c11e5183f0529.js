"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[329],{6329:(Tt,b,r)=>{r.r(b),r.d(b,{InmateModule:()=>Ct});var p=r(9808),m=r(9291),t=r(5e3),a=r(3075),x=r(3892),Z=r(4847),c=r(4999),d=r(8966),y=r(5698),C=r(9646),N=r(4004),v=r(2340),D=r(520),T=r(9479);let h=(()=>{class i{constructor(e,o){this.http=e,this.accountService=o,this.baseUrl=v.N.apiUrl,this.prisoners=[],this.cells=[],this.accountService.currentUser$.pipe((0,y.q)(1)).subscribe(s=>{this.user=s})}loadPrisoners(){return this.http.get(this.baseUrl+"prisoner")}getPrisoner(e){const o=this.prisoners.find(s=>s.inmateId===e);return void 0!==o?(0,C.of)(o):this.http.get(this.baseUrl+"prisoner/"+e)}loadCell(){return this.cells.length>0?(0,C.of)(this.cells):this.http.get(this.baseUrl+"prisoner/cell").pipe((0,N.U)(e=>(this.cells=e,e)))}createPrisoner(e){return this.http.post(this.baseUrl+"prisoner/add-prisoner",e)}updatePrisoner(e,o){return this.http.put(this.baseUrl+"prisoner/update-prisoner/"+e,o)}deleteePrisoner(e){return this.http.delete(this.baseUrl+"prisoner/delete-prisoner/"+e)}deletePhoto(e,o){return this.http.delete(this.baseUrl+"prisoner/"+o+"/delete-photo/"+e)}setMainPhoto(e,o){return this.http.put(this.baseUrl+"prisoner/"+o+"/set-main-photo/"+e,{})}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(D.eN),t.LFG(T.B))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var U=r(7261),g=r(7423);function I(i,n){1&i&&t._UZ(0,"i",8)}let w=(()=>{class i{constructor(e,o,s,l,u){this.inmateService=e,this.route=o,this.deleteData=s,this.dialogRef=l,this.snackBar=u,this.loading=!1,this.snackBarMessage="Successfully deleted data"}ngOnInit(){}submitDeleteData(){this.loading=!0,this.inmateService.deleteePrisoner(this.deleteData.id).subscribe(e=>{this.dialogRef.close("delete"),this.snackBar.open(this.snackBarMessage,"",{duration:5e3}),this.loading=!1},e=>{this.snackBar.open(e.message,"",{duration:6e3}),console.log(e),this.loading=!1})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(h),t.Y36(m.gz),t.Y36(d.WI),t.Y36(d.so),t.Y36(U.ux))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-prisoner-delete"]],decls:11,vars:2,consts:[["mat-dialog-title","",1,"text-center"],["mat-dialog-content",""],[1,"text-center"],[1,"fa","fa-warning","fa-5x",2,"color","rgb(228, 22, 22)"],["mat-dialog-actions","",3,"align"],["mat-raised-button","","color","warn","mat-dialog-close",""],["mat-raised-button","","color","primary",1,"ml-3",3,"click"],["class","fa fa-spinner fa-spin",4,"ngIf"],[1,"fa","fa-spinner","fa-spin"]],template:function(e,o){1&e&&(t.TgZ(0,"h2",0),t._uU(1," Are you sure, you want to delete this data?\n"),t.qZA(),t.TgZ(2,"div",1)(3,"div",2),t._UZ(4,"i",3),t.qZA()(),t.TgZ(5,"div",4)(6,"button",5),t._uU(7,"Close"),t.qZA(),t.TgZ(8,"button",6),t.NdJ("click",function(){return o.submitDeleteData()}),t._uU(9," Delete "),t.YNc(10,I,1,0,"i",7),t.qZA()()),2&e&&(t.xp6(5),t.Q6J("align","end"),t.xp6(5),t.Q6J("ngIf",o.loading))},directives:[d.uh,d.xY,d.H8,g.lW,d.ZT,p.O5],styles:[""]}),i})();var f=r(1793),k=r(4015),J=r(6634),_=r(3150);function Q(i,n){1&i&&t._UZ(0,"i",16)}function F(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div",9),t._UZ(1,"img",10),t.TgZ(2,"div",11)(3,"button",12),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw().setMainPhoto(l)}),t._uU(4,"Main "),t.YNc(5,Q,1,0,"i",13),t.qZA(),t.TgZ(6,"button",14),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw().deletePhoto(l.id)}),t._UZ(7,"i",15),t.qZA()()()}if(2&i){const e=n.$implicit,o=t.oxw();t.xp6(1),t.s9C("src",e.url,t.LSH),t.s9C("alt",e.url),t.xp6(2),t.Q6J("disabled",e.isMain)("ngClass",e.isMain?"btn-success active":"btn-outline-success"),t.xp6(2),t.Q6J("ngIf",o.loading),t.xp6(1),t.Q6J("disabled",e.isMain)}}function O(i,n){if(1&i&&(t.TgZ(0,"td",29),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij("",t.xi3(2,1,(null==e||null==e.file?null:e.file.size)/1024/1024,".2")," MB")}}function Y(i,n){if(1&i&&(t.TgZ(0,"tr")(1,"td")(2,"strong"),t._uU(3),t.qZA()(),t.YNc(4,O,3,4,"td",28),t.qZA()),2&i){const e=n.$implicit,o=t.oxw(2);t.xp6(3),t.Oqu(null==e||null==e.file?null:e.file.name),t.xp6(1),t.Q6J("ngIf",o.uploader.options.isHTML5)}}const M=function(i){return{width:i}};function S(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div",17)(1,"h3"),t._uU(2,"Upload queue"),t.qZA(),t.TgZ(3,"p"),t._uU(4),t.qZA(),t.TgZ(5,"table",18)(6,"thead")(7,"tr")(8,"th",19),t._uU(9,"Name"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Size"),t.qZA()()(),t.TgZ(12,"tbody"),t.YNc(13,Y,5,2,"tr",20),t.qZA()(),t.TgZ(14,"div")(15,"div"),t._uU(16," Queue progress: "),t.TgZ(17,"div",21),t._UZ(18,"div",22),t.qZA()(),t.TgZ(19,"button",23),t.NdJ("click",function(){return t.CHM(e),t.oxw().uploader.uploadAll()}),t._UZ(20,"span",24),t._uU(21," Upload all "),t.qZA(),t.TgZ(22,"button",25),t.NdJ("click",function(){return t.CHM(e),t.oxw().uploader.cancelAll()}),t._UZ(23,"span",26),t._uU(24," Cancel all "),t.qZA(),t.TgZ(25,"button",27),t.NdJ("click",function(){return t.CHM(e),t.oxw().uploader.clearQueue()}),t._UZ(26,"span",15),t._uU(27," Remove all "),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(4),t.hij("Queue length: ",null==e.uploader||null==e.uploader.queue?null:e.uploader.queue.length,""),t.xp6(9),t.Q6J("ngForOf",e.uploader.queue),t.xp6(5),t.Q6J("ngStyle",t.VKq(6,M,e.uploader.progress+"%")),t.xp6(1),t.Q6J("disabled",!e.uploader.getNotUploadedItems().length),t.xp6(3),t.Q6J("disabled",!e.uploader.isUploading),t.xp6(3),t.Q6J("disabled",!e.uploader.queue.length)}}const L=function(i){return{"nv-file-over":i}};let B=(()=>{class i{constructor(e){this.inmateService=e,this.hasBaseDropzoneOver=!1,this.baseUrl=v.N.apiUrl,this.loading=!1}ngOnInit(){this.initializeUploader()}fileOverBase(e){this.hasBaseDropzoneOver=e}initializeUploader(){this.uploader=new _.bA({url:this.baseUrl+"prisoner/add-photo/"+this.prisoner.inmateId,isHTML5:!0,allowedFileType:["image"],removeAfterUpload:!0,autoUpload:!1,maxFileSize:10485760}),this.uploader.onAfterAddingFile=e=>{e.withCredentials=!1},this.uploader.onSuccessItem=(e,o,s,l)=>{if(o){const u=JSON.parse(o);this.prisoner.prisonPhotos.push(u),u.isMain&&(this.prisoner.pictureUrl=u.url)}}}deletePhoto(e){this.inmateService.deletePhoto(e,this.prisoner.id).subscribe(()=>{this.prisoner.prisonPhotos=this.prisoner.prisonPhotos.filter(o=>o.id!==e)})}setMainPhoto(e){this.loading=!0,this.inmateService.setMainPhoto(e.id,this.prisoner.id).subscribe(()=>{this.prisoner.pictureUrl=e.url,this.prisoner.prisonPhotos.forEach(o=>{o.isMain&&(o.isMain=!1),o.id===e.id&&(o.isMain=!0)}),this.loading=!1})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(h))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-photo-editor"]],inputs:{prisoner:"prisoner"},decls:15,vars:8,consts:[[1,"row"],["class","col-3 d-flex flex-column",4,"ngFor","ngForOf"],[1,"row","mt-3"],[1,"col-md-3"],["ng2FileDrop","",1,"card","bg-faded","p-3","text-center","mb-3","my-drop-zone",3,"ngClass","uploader","fileOver"],[1,"fa","fa-upload","fa-3x"],["type","file","ng2FileSelect","","multiple","",3,"uploader"],["type","file","ng2FileSelect","",3,"uploader"],["class","col-md-9","style","margin-bottom: 40px",4,"ngIf"],[1,"col-3","d-flex","flex-column"],[1,"img-thumbnail","p-1",3,"src","alt"],[1,"d-flex"],[1,"btn","btn-sm","flex-grow-1",3,"disabled","ngClass","click"],["class","fa fa-spinner fa-spin",4,"ngIf"],[1,"btn","btn-sm","btn-danger","flex-grow-1",3,"disabled","click"],[1,"fa","fa-trash"],[1,"fa","fa-spinner","fa-spin"],[1,"col-md-9",2,"margin-bottom","40px"],[1,"table"],["width","50%"],[4,"ngFor","ngForOf"],[1,"progress"],["role","progressbar",1,"progress-bar",3,"ngStyle"],["type","button",1,"btn","btn-success","btn-s",3,"disabled","click"],[1,"fa","fa-upload"],["type","button",1,"btn","btn-warning","btn-s",3,"disabled","click"],[1,"fa","fa-ban"],["type","button",1,"btn","btn-danger","btn-s",3,"disabled","click"],["nowrap","",4,"ngIf"],["nowrap",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.YNc(1,F,8,6,"div",1),t.qZA(),t.TgZ(2,"div",2)(3,"div",3)(4,"h3"),t._uU(5,"Add Photos"),t.qZA(),t.TgZ(6,"div",4),t.NdJ("fileOver",function(l){return o.fileOverBase(l)}),t._UZ(7,"i",5),t._uU(8," Drop photos here "),t.qZA(),t._uU(9," Multiple "),t._UZ(10,"input",6)(11,"br"),t._uU(12," Single "),t._UZ(13,"input",7),t.qZA(),t.YNc(14,S,28,8,"div",8),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",o.prisoner.prisonPhotos),t.xp6(5),t.Q6J("ngClass",t.VKq(6,L,o.hasBaseDropzoneOver))("uploader",o.uploader),t.xp6(4),t.Q6J("uploader",o.uploader),t.xp6(3),t.Q6J("uploader",o.uploader),t.xp6(1),t.Q6J("ngIf",null==o.uploader||null==o.uploader.queue?null:o.uploader.queue.length))},directives:[p.sg,p.mk,p.O5,_.GN,_.C6,p.PC],pipes:[p.JJ],styles:[""]}),i})();function E(i,n){if(1&i&&(t.TgZ(0,"option",31),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij("",e.name," ")}}function H(i,n){if(1&i&&(t.TgZ(0,"div",10)(1,"div",26),t._UZ(2,"app-date-input",27),t.qZA(),t.TgZ(3,"div",26)(4,"label",28),t._uU(5,"Cell Name"),t.qZA(),t.TgZ(6,"select",29),t.YNc(7,E,2,2,"option",30),t.qZA()()()),2&i){const e=t.oxw();t.xp6(2),t.Q6J("label","Date of birth"),t.xp6(5),t.Q6J("ngForOf",e.cells)}}function z(i,n){if(1&i&&(t.TgZ(0,"tab",32),t._UZ(1,"app-photo-editor",33),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("prisoner",e.prisoner)}}function $(i,n){1&i&&t._UZ(0,"i",34)}let A=(()=>{class i{constructor(e,o,s,l,u,vt){this.inmateService=e,this.route=o,this.formBuilder=s,this.editData=l,this.dialogRef=u,this.snackBar=vt,this.submitOptions="Create",this.loading=!1,this.snackBarCreateMessage="Data added successfully",this.snackBarUpdateMessage="Data updated successfully"}ngOnInit(){this.prisoner=this.editData,this.maxDate=new Date,this.maxDate.setFullYear(this.maxDate.getFullYear()-18),this.initializedForm(),this.loadCells(),this.editData&&(this.submitOptions="Update",this.prisonerForm.controls.firstName.setValue(this.editData.firstName),this.prisonerForm.controls.lastName.setValue(this.editData.lastName),this.prisonerForm.controls.address.setValue(this.editData.address),this.prisonerForm.controls.race.setValue(this.editData.race),this.prisonerForm.controls.gender.setValue(this.editData.gender),this.prisonerForm.controls.status.setValue(this.editData.status),this.prisonerForm.controls.height.setValue(this.editData.height),this.prisonerForm.controls.weight.setValue(this.editData.weight),this.prisonerForm.controls.eyeColor.setValue(this.editData.eyeColor),this.prisonerForm.controls.hairColor.setValue(this.editData.hairColor),this.prisonerForm.controls.city.setValue(this.editData.city),this.prisonerForm.controls.nationality.setValue(this.editData.nationality))}initializedForm(){this.prisonerForm=this.formBuilder.group({firstName:[null,a.kI.required],lastName:[null,a.kI.required],address:[null,a.kI.required],dateOfBirth:[null,a.kI.required],race:[null,a.kI.required],gender:[null,a.kI.required],status:[null,a.kI.required],height:[null,a.kI.required],weight:[null,a.kI.required],eyeColor:[null,a.kI.required],hairColor:[null,a.kI.required],city:[null,a.kI.required],nationality:[null,a.kI.required],blockId:["",a.kI.required]})}submitData(){this.editData?this.updatePrisonerData():this.prisonerForm.valid&&(this.loading=!0,this.inmateService.createPrisoner(this.prisonerForm.value).subscribe(e=>{this.prisonerForm.reset(),this.dialogRef.close("create"),this.snackBar.open(this.snackBarCreateMessage,"",{duration:5e3}),this.loading=!1},e=>{this.snackBar.open(e.message,"",{duration:6e3}),console.log(e),this.loading=!1}))}updatePrisonerData(){this.loading=!0,this.inmateService.updatePrisoner(this.editData.id,this.prisonerForm.value).subscribe(e=>{this.prisonerForm.reset(),this.dialogRef.close("update"),this.snackBar.open(this.snackBarUpdateMessage,"",{duration:5e3}),this.loading=!1},e=>{this.snackBar.open(e.message,"",{duration:6e3}),console.log(e),this.loading=!1})}loadCells(){this.inmateService.loadCell().subscribe(e=>{this.cells=e})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(h),t.Y36(m.gz),t.Y36(a.qu),t.Y36(d.WI),t.Y36(d.so),t.Y36(U.ux))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-prisoner-edit"]],decls:42,vars:20,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"member-tabset"],[3,"heading"],["autocomplete","off",3,"formGroup"],[1,"row","form-group","mb-3"],[1,"col-4"],["formControlName","firstName",3,"label"],["formControlName","lastName",3,"label"],["formControlName","address",3,"label"],[1,"row","form-group","mb-2"],["formControlName","race",3,"label"],["formControlName","gender",3,"label"],["formControlName","status",3,"label"],["formControlName","height",3,"label"],["formControlName","weight",3,"label"],["formControlName","eyeColor",3,"label"],["formControlName","hairColor",3,"label"],["formControlName","city",3,"label"],["formControlName","nationality",3,"label"],["class","row form-group mb-2",4,"ngIf"],["heading","Update Photo",4,"ngIf"],["mat-dialog-actions","",1,"",3,"align"],["mat-raised-button","","color","warn","mat-dialog-close",""],["mat-raised-button","","color","primary",1,"ml-3",3,"disabled","click"],["class","fa fa-spinner fa-spin",4,"ngIf"],[1,"col-6"],["formControlName","dateOfBirth",3,"label"],["for","blockId"],["formControlName","blockId","id","blockId","name","blockId","required","",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["heading","Update Photo"],[3,"prisoner"],[1,"fa","fa-spinner","fa-spin"]],template:function(e,o){1&e&&(t.TgZ(0,"h2",0),t._uU(1,"Prisoner Data"),t.qZA(),t.TgZ(2,"div",1)(3,"tabset",2)(4,"tab",3)(5,"form",4)(6,"div",5)(7,"div",6),t._UZ(8,"app-text-input",7),t.qZA(),t.TgZ(9,"div",6),t._UZ(10,"app-text-input",8),t.qZA(),t.TgZ(11,"div",6),t._UZ(12,"app-text-input",9),t.qZA()(),t.TgZ(13,"div",10)(14,"div",6),t._UZ(15,"app-text-input",11),t.qZA(),t.TgZ(16,"div",6),t._UZ(17,"app-text-input",12),t.qZA(),t.TgZ(18,"div",6),t._UZ(19,"app-text-input",13),t.qZA()(),t.TgZ(20,"div",10)(21,"div",6),t._UZ(22,"app-text-input",14),t.qZA(),t.TgZ(23,"div",6),t._UZ(24,"app-text-input",15),t.qZA(),t.TgZ(25,"div",6),t._UZ(26,"app-text-input",16),t.qZA()(),t.TgZ(27,"div",10)(28,"div",6),t._UZ(29,"app-text-input",17),t.qZA(),t.TgZ(30,"div",6),t._UZ(31,"app-text-input",18),t.qZA(),t.TgZ(32,"div",6),t._UZ(33,"app-text-input",19),t.qZA()(),t.YNc(34,H,8,2,"div",20),t.qZA()(),t.YNc(35,z,2,1,"tab",21),t.qZA()(),t.TgZ(36,"div",22)(37,"button",23),t._uU(38,"Close"),t.qZA(),t.TgZ(39,"button",24),t.NdJ("click",function(){return o.submitData()}),t._uU(40),t.YNc(41,$,1,0,"i",25),t.qZA()()),2&e&&(t.xp6(4),t.MGl("heading","",o.submitOptions," Data"),t.xp6(1),t.Q6J("formGroup",o.prisonerForm),t.xp6(3),t.Q6J("label","First Name"),t.xp6(2),t.Q6J("label","Last Name"),t.xp6(2),t.Q6J("label","Address"),t.xp6(3),t.Q6J("label","Race"),t.xp6(2),t.Q6J("label","Gender"),t.xp6(2),t.Q6J("label","Status"),t.xp6(3),t.Q6J("label","Height"),t.xp6(2),t.Q6J("label","Weight"),t.xp6(2),t.Q6J("label","Eye Color"),t.xp6(3),t.Q6J("label","Hair Color"),t.xp6(2),t.Q6J("label","City"),t.xp6(2),t.Q6J("label","Nationality"),t.xp6(1),t.Q6J("ngIf","Create"===o.submitOptions),t.xp6(1),t.Q6J("ngIf",o.prisoner),t.xp6(1),t.Q6J("align","end"),t.xp6(3),t.Q6J("disabled",!o.prisonerForm.dirty),t.xp6(1),t.hij(" ",o.submitOptions," "),t.xp6(1),t.Q6J("ngIf",o.loading))},directives:[d.uh,d.xY,f.AH,f.wW,a._Y,a.JL,a.sg,k.t,a.JJ,a.u,p.O5,J.Y,a.EJ,a.Q7,p.sg,a.YN,a.Kr,B,d.H8,g.lW,d.ZT],styles:[""]}),i})();var P=r(7322),G=r(7531),R=r(5245),V=r(7238);function j(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div",22)(1,"button",23),t.NdJ("click",function(){return t.CHM(e),t.oxw().openDialog()}),t.TgZ(2,"mat-icon"),t._uU(3,"add"),t.qZA(),t._uU(4," Add New Prisoner "),t.qZA()()}if(2&i){const e=n.ngIf;t.xp6(1),t.Q6J("disabled",e.roles.Admin)}}function W(i,n){1&i&&(t.TgZ(0,"th",24),t._uU(1," Photo "),t.qZA())}function X(i,n){if(1&i&&(t.TgZ(0,"td",25),t._UZ(1,"img",26),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.s9C("src",e.pictureUrl||"assets/user.png",t.LSH),t.s9C("alt",e.firstName)}}function K(i,n){1&i&&(t.TgZ(0,"th",24),t._uU(1," Name "),t.qZA())}function tt(i,n){if(1&i&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.AsE(" ",e.firstName," ",e.lastName," ")}}function et(i,n){1&i&&(t.TgZ(0,"th",24),t._uU(1," Block "),t.qZA())}function it(i,n){if(1&i&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",e.block," ")}}function ot(i,n){1&i&&(t.TgZ(0,"th",24),t._uU(1," Age "),t.qZA())}function nt(i,n){if(1&i&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",e.age," ")}}function rt(i,n){1&i&&(t.TgZ(0,"th",24),t._uU(1," Gender "),t.qZA())}function st(i,n){if(1&i&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",e.gender," ")}}function at(i,n){1&i&&(t.TgZ(0,"th",24),t._uU(1," Arrest date "),t.qZA())}function lt(i,n){if(1&i&&(t.TgZ(0,"td",25),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.created)," ")}}function pt(i,n){1&i&&t._UZ(0,"th",24)}function dt(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"td",25)(1,"button",27)(2,"mat-icon"),t._uU(3,"data_thresholding"),t.qZA()(),t.TgZ(4,"button",28),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw().editDialog(l)}),t.TgZ(5,"mat-icon"),t._uU(6,"edit"),t.qZA()(),t.TgZ(7,"button",29),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw().deleteDialog(l)}),t.TgZ(8,"mat-icon"),t._uU(9,"delete"),t.qZA()()()}if(2&i){const e=n.$implicit,o=t.oxw();t.xp6(1),t.MGl("routerLink","/prisoner/",e.inmateId,""),t.Q6J("matTooltipPosition",o.position.value),t.xp6(3),t.Q6J("matTooltipPosition",o.position.value),t.xp6(3),t.Q6J("matTooltipPosition",o.position.value)}}function ct(i,n){1&i&&t._UZ(0,"tr",30)}function ut(i,n){1&i&&t._UZ(0,"tr",31)}function mt(i,n){if(1&i&&(t.TgZ(0,"tr",32)(1,"td",33),t._uU(2),t.qZA()()),2&i){t.oxw();const e=t.MAs(6);t.xp6(2),t.hij('No data matching the filter "',e.value,'"')}}const ht=function(){return[5,10,25,100]};let gt=(()=>{class i{constructor(e,o,s){this.inmeteService=e,this.dialog=o,this.accountService=s,this.displayedColumns=["pictureUrl","name","block","age","gender","created","action"],this.positionOptions=["below"],this.position=new a.NI(this.positionOptions[0]),this.currentUser$=this.accountService.currentUser$}ngOnInit(){this.loadPrisoners()}loadPrisoners(){this.inmeteService.loadPrisoners().subscribe(e=>{this.dataSource=new c.by(e),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}applyFilter(e){this.dataSource.filter=e.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}openDialog(){this.dialog.open(A,{disableClose:!0,autoFocus:!0,width:"40%"}).afterClosed().subscribe(e=>{"create"===e&&this.loadPrisoners()})}editDialog(e){this.dialog.open(A,{disableClose:!0,autoFocus:!0,width:"40%",data:e}).afterClosed().subscribe(o=>{"update"===o&&this.loadPrisoners()})}deleteDialog(e){this.dialog.open(w,{disableClose:!0,autoFocus:!0,width:"40%",data:e}).afterClosed().subscribe(o=>{"delete"===o&&this.loadPrisoners()})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(h),t.Y36(d.uw),t.Y36(T.B))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-prisoner-list"]],viewQuery:function(e,o){if(1&e&&(t.Gf(x.NW,5),t.Gf(Z.YE,5)),2&e){let s;t.iGM(s=t.CRH())&&(o.paginator=s.first),t.iGM(s=t.CRH())&&(o.sort=s.first)}},decls:37,vars:8,consts:[[1,"d-flex"],[1,"d-flex","col-4"],["appearance","standard"],["matInput","","placeholder","Search Prisoner...",3,"keyup"],["input",""],["class","p-4","style","margin-left: 40%;",4,"ngIf"],[1,"col-12"],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","pictureUrl"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","block"],["matColumnDef","age"],["matColumnDef","gender"],["matColumnDef","created"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of users",3,"pageSizeOptions"],[1,"p-4",2,"margin-left","40%"],["mat-raised-button","","color","default",3,"disabled","click"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"src","alt"],["mat-icon-button","","color","primary","matTooltip","View data",3,"routerLink","matTooltipPosition"],["mat-icon-button","","color","accent","matTooltip","Edit data",3,"matTooltipPosition","click"],["mat-icon-button","","color","warn","matTooltip","Delete data",3,"matTooltipPosition","click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"mat-label"),t._uU(4,"Filter"),t.qZA(),t.TgZ(5,"input",3,4),t.NdJ("keyup",function(l){return o.applyFilter(l)}),t.qZA()()(),t.YNc(7,j,5,1,"div",5),t.ALo(8,"async"),t.qZA(),t.TgZ(9,"div",6)(10,"div",7)(11,"table",8),t.ynx(12,9),t.YNc(13,W,2,0,"th",10),t.YNc(14,X,2,2,"td",11),t.BQk(),t.ynx(15,12),t.YNc(16,K,2,0,"th",10),t.YNc(17,tt,2,2,"td",11),t.BQk(),t.ynx(18,13),t.YNc(19,et,2,0,"th",10),t.YNc(20,it,2,1,"td",11),t.BQk(),t.ynx(21,14),t.YNc(22,ot,2,0,"th",10),t.YNc(23,nt,2,1,"td",11),t.BQk(),t.ynx(24,15),t.YNc(25,rt,2,0,"th",10),t.YNc(26,st,2,1,"td",11),t.BQk(),t.ynx(27,16),t.YNc(28,at,2,0,"th",10),t.YNc(29,lt,3,3,"td",11),t.BQk(),t.ynx(30,17),t.YNc(31,pt,1,0,"th",10),t.YNc(32,dt,10,4,"td",11),t.BQk(),t.YNc(33,ct,1,0,"tr",18),t.YNc(34,ut,1,0,"tr",19),t.YNc(35,mt,3,1,"tr",20),t.qZA(),t._UZ(36,"mat-paginator",21),t.qZA()()),2&e&&(t.xp6(7),t.Q6J("ngIf",t.lcZ(8,5,o.currentUser$)),t.xp6(4),t.Q6J("dataSource",o.dataSource),t.xp6(22),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(7,ht)))},directives:[P.KE,P.hX,G.Nt,p.O5,g.lW,R.Hw,c.BZ,Z.YE,c.w1,c.fO,c.ge,Z.nU,c.Dz,c.ev,V.gM,m.rH,c.as,c.XQ,c.nj,c.Gk,c.Ee,x.NW],pipes:[p.Ov,p.uU],styles:["table[_ngcontent-%COMP%]{width:100%}.mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{width:12%}tr[_ngcontent-%COMP%]:hover{background:#e3e3e3}img[_ngcontent-%COMP%]{border-radius:50%;width:25%}"]}),i})(),ft=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-inmate"]],decls:5,vars:0,consts:[[1,"container","p-3","mt-5"],[1,"row"],[1,"text-center",2,"font-family","serif"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),t._uU(3,"Prisoners data"),t.qZA(),t._UZ(4,"app-prisoner-list"),t.qZA()())},directives:[gt],styles:[""]}),i})();var q=r(1658);function Zt(i,n){if(1&i&&(t.ynx(0),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),t._UZ(5,"img",5),t.TgZ(6,"div",6)(7,"div",7)(8,"button",8),t._uU(9,"Go back"),t.qZA()()()()(),t.TgZ(10,"div",9)(11,"tabset",10)(12,"tab",11)(13,"table",12)(14,"tbody")(15,"tr")(16,"td"),t._uU(17,"Inmate Id #"),t.qZA(),t.TgZ(18,"td"),t._uU(19),t.qZA()(),t.TgZ(20,"tr")(21,"td"),t._uU(22,"Name"),t.qZA(),t.TgZ(23,"td"),t._uU(24),t.qZA()(),t.TgZ(25,"tr")(26,"td"),t._uU(27,"Country"),t.qZA(),t.TgZ(28,"td"),t._uU(29),t.qZA()(),t.TgZ(30,"tr")(31,"td"),t._uU(32,"City"),t.qZA(),t.TgZ(33,"td"),t._uU(34),t.qZA()(),t.TgZ(35,"tr")(36,"td"),t._uU(37,"Age"),t.qZA(),t.TgZ(38,"td"),t._uU(39),t.qZA()(),t.TgZ(40,"tr")(41,"td"),t._uU(42,"Gender"),t.qZA(),t.TgZ(43,"td"),t._uU(44),t.ALo(45,"titlecase"),t.qZA()(),t.TgZ(46,"tr")(47,"td"),t._uU(48,"Arrest date"),t.qZA(),t.TgZ(49,"td"),t._uU(50),t.ALo(51,"date"),t.qZA()(),t.TgZ(52,"tr")(53,"td"),t._uU(54,"Height"),t.qZA(),t.TgZ(55,"td"),t._uU(56),t.qZA()(),t.TgZ(57,"tr")(58,"td"),t._uU(59,"Weight"),t.qZA(),t.TgZ(60,"td"),t._uU(61),t.qZA()(),t.TgZ(62,"tr")(63,"td"),t._uU(64,"Eye color"),t.qZA(),t.TgZ(65,"td"),t._uU(66),t.qZA()(),t.TgZ(67,"tr")(68,"td"),t._uU(69,"Hair color"),t.qZA(),t.TgZ(70,"td"),t._uU(71),t.qZA()(),t.TgZ(72,"tr")(73,"td"),t._uU(74,"Cell name"),t.qZA(),t.TgZ(75,"td"),t._uU(76),t.qZA()()()()(),t.TgZ(77,"tab",11),t._UZ(78,"ngx-gallery",13),t.qZA()()()()(),t.BQk()),2&i){const e=t.oxw();t.xp6(5),t.s9C("src",e.prisoner.pictureUrl||"./assets/user.png",t.LSH),t.s9C("alt",e.prisoner.firstName),t.xp6(7),t.MGl("heading","About ",e.prisoner.firstName,""),t.xp6(7),t.Oqu(e.prisoner.inmateId),t.xp6(5),t.AsE("",e.prisoner.firstName," ",e.prisoner.lastName,""),t.xp6(5),t.Oqu(e.prisoner.nationality),t.xp6(5),t.Oqu(e.prisoner.city),t.xp6(5),t.Oqu(e.prisoner.age),t.xp6(5),t.Oqu(t.lcZ(45,19,e.prisoner.gender)),t.xp6(6),t.Oqu(t.lcZ(51,21,e.prisoner.created)),t.xp6(6),t.Oqu(e.prisoner.height),t.xp6(5),t.Oqu(e.prisoner.weight),t.xp6(5),t.Oqu(e.prisoner.eyeColor),t.xp6(5),t.Oqu(e.prisoner.hairColor),t.xp6(5),t.Oqu(e.prisoner.block),t.xp6(1),t.MGl("heading","Photos of ",e.prisoner.firstName,""),t.xp6(1),t.Q6J("options",e.galleryOptions)("images",e.galleryImages)}}const _t=[{path:"",component:ft},{path:":inmateid",component:(()=>{class i{constructor(e,o){this.inmateService=e,this.route=o}ngOnInit(){this.loadPrisoner(),this.galleryOptions=[{width:"500px",height:"500px",imagePercent:100,thumbnailsColumns:4,imageAnimation:q.zw.Slide,preview:!1}]}getImages(){const e=[];for(const o of this.prisoner.prisonPhotos)e.push({small:null==o?void 0:o.url,medium:null==o?void 0:o.url,big:null==o?void 0:o.url});return e}loadPrisoner(){this.inmateService.getPrisoner(this.route.snapshot.paramMap.get("inmateid")).subscribe(e=>{this.prisoner=e,this.galleryImages=this.getImages()})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(h),t.Y36(m.gz))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-prisoner-detail"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"container","p-4","mt-5",2,"background-color","#fff"],[1,"row"],[1,"col-4"],[1,"card"],[1,"card-img-top","img-thumbnail",3,"src","alt"],[1,"card-footer"],[1,"btn-group","d-flex"],["routerLink","/prisoner","mat-raised-button","","color","default",1,"btn"],[1,"col-8"],[1,"member-tabset"],[3,"heading"],[1,"table","table-striped"],[2,"display","inline-block","margin-bottom","20px",3,"options","images"]],template:function(e,o){1&e&&t.YNc(0,Zt,79,23,"ng-container",0),2&e&&t.Q6J("ngIf",o.prisoner)},directives:[p.O5,g.lW,m.rH,f.AH,f.wW,q.g$],pipes:[p.rS,p.uU],styles:["td[_ngcontent-%COMP%]{font-family:serif;font-size:15px}"]}),i})()}];let bt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[m.Bz.forChild(_t)],m.Bz]}),i})();var xt=r(7928);let Ct=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[p.ez,bt,xt.m]]}),i})()}}]);